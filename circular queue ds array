#include <iostream>
#include <string>
using namespace std;

#define MAX 5  

class CircularQueue {
    string events[MAX];
    int front, rear, count;

public:
    CircularQueue() {
        front = 0;
        rear = -1;
        count = 0;
    }

    bool isFull() {
        return count == MAX;
    }

    bool isEmpty() {
        return count == 0;
    }

    void addEvent(string event) {
        if (isFull()) {
            cout << "⚠ Queue is full. Cannot add more events.\n";
            return;
        }
        rear = (rear + 1) % MAX;
        events[rear] = event;
        count++;
        cout << "Event added successfully!\n";
    }

    void processEvent() {
        if (isEmpty()) {
            cout << "⚠ No events to process.\n";
            return;
        }
        cout << " Processing Event: " << events[front] << endl;
        front = (front + 1) % MAX;
        count--;
    }

    void displayEvents() {
        if (isEmpty()) {
            cout << " No pending events.\n";
            return;
        }
        cout << "\n--- Pending Events ---\n";
        int i = front;
        for (int j = 0; j < count; j++) {
            cout << (j + 1) << ". " << events[i] << endl;
            i = (i + 1) % MAX;
        }
    }

    void cancelEvent(string eventName) {
        if (isEmpty()) {
            cout << " No events to cancel.\n";
            return;
        }

        bool found = false;
        string temp[MAX];
        int tempCount = 0;

        for (int i = 0, idx = front; i < count; i++) {
            if (events[idx] != eventName)
                temp[tempCount++] = events[idx];
            else
                found = true;
            idx = (idx + 1) % MAX;
        }

        if (found) {
            front = 0;
            rear = tempCount - 1;
            count = tempCount;
            for (int i = 0; i < tempCount; i++)
                events[i] = temp[i];

            cout << "Event '" << eventName << "' canceled successfully.\n";
        } else {
            cout << "Event not found or already processed.\n";
        }
    }
};

int main() {
    CircularQueue cq;
    int choice;
    string event;

    do {
        cout << "\n===== Real-Time Event Processing System =====\n";
        cout << "1. Add Event\n2. Process Next Event\n3. Display Pending Events\n";
        cout << "4. Cancel Event\n0. Exit\nEnter your choice: ";
        cin >> choice;

        switch (choice) {
        case 1:
            cout << "Enter event description: ";
            cin.ignore();
            getline(cin, event);
            cq.addEvent(event);
            break;

        case 2:
            cq.processEvent();
            break;

        case 3:
            cq.displayEvents();
            break;

        case 4:
            cout << "Enter event name to cancel: ";
            cin.ignore();
            getline(cin, event);
            cq.cancelEvent(event);
            break;

        case 0:
            cout << "Exiting system...\n";
            break;

        default:
            cout << "Invalid choice! Try again.\n";
        }
    } while (choice != 0);

    return 0;
}
